import{g as l,j as t,f as d,U as h,h as u,c as x,r as o,A as j}from"./index-4Rhv0BL6.js";import{f}from"./unit-FxYNZTue.js";const m=e=>{const{t:a}=l();return t.jsx("div",{className:e.className,children:t.jsxs("table",{className:"table","aria-label":"Problem Table",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-base-content/10",children:[t.jsx("th",{children:a("Rank")},"rank"),t.jsx("th",{children:a("User")},"user"),t.jsx("th",{children:a("Submit Count")},"submit-count"),t.jsx("th",{children:a("Accept Count")},"accept-count"),t.jsx("th",{children:a("Accept Rate")},"accept-rate")]})}),t.jsx("tbody",{children:e.data.map((s,c)=>{var n,r,i;return t.jsxs("tr",{className:d(e.data.length>1?"border-base-content/10":"border-0"),children:[t.jsx("th",{children:s.rank}),t.jsxs("td",{className:"flex items-center gap-3 py-2",children:[t.jsx("div",{className:"avatar",children:t.jsx(h,{alt:(n=s.user)==null?void 0:n.name,avatarUrl:(r=s.user)==null?void 0:r.avatarUrl})}),t.jsx("span",{children:(i=s.user)==null?void 0:i.name})]}),t.jsx("td",{children:s.submitCount}),t.jsx("td",{children:s.acceptCount}),t.jsx("td",{children:f(s.acceptRate)})]},c)})})]})})};async function b(){let e=await u.get("/api/v1/rank");if(e.status!==200)throw Error("failed to get judge list");return e.data}const p=()=>{const e=x(),{t:a}=l(),[s,c]=o.useState([]);o.useEffect(()=>{b().then(r=>{r.list&&c(r.list)}).catch(r=>{e({type:j,payload:{id:"rank-fetch-error",content:`${a("Failed to fetch rank list")}`,duration:3e3,level:"error",err:r.toString()}})})},[e,a]);function n(){return s}return{getRankList:n}},R=()=>{const{t:e}=l(),{getRankList:a}=p(),s=a();return t.jsxs("div",{className:"flex w-full flex-auto flex-col gap-2",children:[t.jsx("div",{children:t.jsx("p",{className:"text-xs",children:e("Once you passed the problem, the submission after will not be counted.")})}),t.jsx("div",{className:"h-fit w-full overflow-auto rounded border border-base-content/10 bg-base-100",children:t.jsx("div",{className:"flex w-full flex-col gap-2",children:t.jsx(m,{data:s})})})]})};export{R as default};
