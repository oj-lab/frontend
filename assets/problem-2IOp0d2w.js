import{c as P,g as h,r as t,A as d}from"./index-jiRvWDSr.js";import{g as v,b as F}from"./problem-jL7hy05k.js";const A=(n,s)=>{const i=P(),{t:a}=h(),[u,l]=t.useState(null),o=t.useRef(s);t.useEffect(()=>{o.current=s},[s]),t.useEffect(()=>{v(n).then(r=>{l(r)}).catch(r=>{var c;i({type:d,payload:{id:"problem-fetch-error",content:`${a("Failed to fetch problem")}`,duration:3e3,err:r.toString(),level:"error"}}),(c=o.current)==null||c.call(o)})},[n]);function f(){return u}return{getProblem:f}},C=()=>{const n=P(),{t:s}=h(),[i,a]=t.useState([]),[u,l]=t.useState(0),[o,f]=t.useState(10),[r,c]=t.useState(0),[m,S]=t.useState(""),[b,y]=t.useState(""),p=t.useCallback(()=>{F(o,r,m,b).then(e=>{a(e.list),l(e.total)}).catch(e=>{n({type:d,payload:{id:"problem-list-fetch-error",content:`${s("Failed to fetch problem list")}`,duration:3e3,level:"error",err:e.toString()}})})},[o,r,m,b,n,s]);t.useEffect(()=>{p()},[o,r,m,b,p]);function L(){return i}function I(e){return Math.ceil(u/e)}function E(e,g){f(e),c(g)}function Q(e,g){S(e),y(g)}function $(){p()}return{getProblemInfoList:L,getPageCount:I,setPagenation:E,setSearch:Q,refreshProblemInfoList:$}};export{C as a,A as u};
