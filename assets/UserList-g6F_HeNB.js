import{e as g,r as c,j as e,D as f,d as p,U as v,f as N,R as d}from"./index-cUn6f-UY.js";import{P as C}from"./Pagination-nucf6OGH.js";import{C as w,T as P}from"./ConfirmDialog-JQq06Oi4.js";async function U(t,s){t=t||10,s=s||0;let a=await g.get("/api/v1/user",{params:{limit:t,offset:s}});if(a.status!==200)throw Error("failed to get problem list");return a.data}const M=()=>{const[t,s]=c.useState([]),[a,n]=c.useState(0),[r,l]=c.useState(10),[i,x]=c.useState(0);c.useEffect(()=>{U(r,i).then(o=>{s(o.list),n(o.total)})},[r,i]);function u(){return t}function m(o){return Math.ceil(a/o)}function j(o,b){l(o),x(b)}return{getUserInfoList:u,getPageCount:m,setPagenation:j}},k=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:f,strokeLinecap:"round",strokeLinejoin:"round",className:t.className,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),e.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h2.5"}),e.jsx("path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M19.001 15.5v1.5"}),e.jsx("path",{d:"M19.001 21v1.5"}),e.jsx("path",{d:"M22.032 17.25l-1.299 .75"}),e.jsx("path",{d:"M17.27 20l-1.3 .75"}),e.jsx("path",{d:"M15.97 17.25l1.3 .75"}),e.jsx("path",{d:"M20.733 20l1.3 .75"})]}),L=t=>{const{t:s}=p();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.className,children:e.jsxs("table",{className:"table","aria-label":"Problem Table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-base-content/10",children:[e.jsx("th",{children:s("Avatar")},"avatar"),e.jsx("th",{children:s("Name")},"name"),e.jsx("th",{children:s("Account")},"account"),e.jsx("th",{children:s("Roles")},"roles"),t.showActions&&e.jsx("th",{children:s("Actions")},"actions")]})}),e.jsx("tbody",{children:t.data.map(a=>e.jsxs("tr",{className:"border-base-content/10",children:[e.jsx("td",{className:"flex items-center gap-3 py-2",children:e.jsx("div",{className:"avatar",children:e.jsx(v,{alt:a.name,avatarUrl:a.avatarUrl})})}),e.jsx("th",{children:a.name}),e.jsx("td",{children:a.account}),e.jsx("td",{children:e.jsx(A,{roles:a.roles??[]})}),t.showActions&&e.jsx("td",{className:"p-2",children:e.jsx(S,{userInfo:a,onClickDelete:()=>{}})})]},a.account))})]})}),e.jsx(w,{id:"user_delete_confirm_modal",title:"Confirm",message:"Are you sure to delete this user?",onClickConfirm:()=>{window.location.reload()}})]})},A=t=>t.roles===void 0?e.jsx(e.Fragment,{}):e.jsx("div",{className:"space-x-2",children:t.roles.map(s=>e.jsx("div",{className:"badge border-0 bg-base-300 font-semibold text-base-content/80",children:s},s))}),S=t=>{var a;const s=n=>{n.preventDefault(),n.stopPropagation(),t.onClickDelete();const r=document.getElementById("delete_confirm_modal");r==null||r.showModal()};return e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"btn btn-square btn-ghost btn-sm rounded",children:e.jsx(k,{className:N("h-5 w-5",(a=t.userInfo.roles)!=null&&a.includes("admin")?"text-success":"text-base-content")})}),e.jsx("button",{className:"btn btn-square btn-ghost btn-sm rounded hover:bg-error/20",onClick:s,children:e.jsx(P,{className:"h-5 w-5 text-error"})})]})},h=[10,25,50],I=()=>{const{getUserInfoList:t,getPageCount:s,setPagenation:a}=M(),[n,r]=d.useState(h[0]),[l,i]=d.useState(0);return c.useEffect(()=>{a(n,l*n)},[n,l]),e.jsxs("div",{className:"card card-bordered flex w-full flex-col rounded border-base-content/10 bg-base-100",children:[e.jsx(L,{data:t(),showActions:!0,className:t().length===1?"":"border-b border-base-content/10"}),e.jsx(C,{page:l,pageCount:s(n),setCountPerPage:r,countPerPage:n,countPerPageSelections:h,setPage:i})]})};export{I as default};
