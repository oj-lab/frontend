import{h as f,r as n,c as S,g as p,A as J}from"./index-5gPbFPLR.js";async function m(t,e,s){let a=JSON.stringify({code:e,language:s}),o=await f.post(`/api/v1/problem/${t}/judge`,a);if(o.status!==200)throw Error("failed to run judge");return o.data}async function b(t,e,s){t=t||10,e=e||0,s=s||!1;let r=await f.get("/api/v1/judge",{params:{limit:t,offset:e,self_only:s}});if(r.status!==200)throw Error("failed to get judge list");return r.data}async function x(t){let e=await f.get(`/api/v1/judge/${t}`);if(e.status!==200)throw Error("failed to get judge detail");return e.data}const O=t=>{const[e,s]=n.useState();n.useEffect(()=>{x(t).then(a=>{s(a)}).catch(a=>{console.log(a)})},[t]);function r(){return e}return{getJudge:r}},P=t=>{const e=S(),{t:s}=p(),[r,a]=n.useState(""),[o,i]=n.useState("");function d(l){m(t,r,o).then(g=>{l(g)}).catch(g=>{e({type:J,payload:{id:"judge-fetch-error",content:`${s("Failed to fetch judge")}`,duration:3e3,level:"error",err:g.toString()}})})}function c(){return o}return{runJudge:d,setSrc:a,setSrcLanguage:i,getSrcLanguage:c}},A=()=>{const t=S(),{t:e}=p(),[s,r]=n.useState(0),[a,o]=n.useState(10),[i,d]=n.useState(0),[c,l]=n.useState(!1),[g,j]=n.useState([]),h=()=>{b(a,i,c).then(u=>{j(u.list),r(u.total)}).catch(u=>{t({type:J,payload:{id:"judge-list-fetch-error",content:`${e("Failed to fetch judge list")}`,duration:3e3,level:"error",err:u.toString()}})})};n.useEffect(h,[t,a,i,e,c]);function y(){return g}function L(){h()}function v(u){return Math.ceil(s/u)}function w(u,$){o(u),d($)}function E(){return c}return{getJudgeList:y,refreshJudgeList:L,getPageCount:v,setPagenation:w,getSelfOnly:E,setSelfOnly:l}};export{A as a,O as b,P as u};
